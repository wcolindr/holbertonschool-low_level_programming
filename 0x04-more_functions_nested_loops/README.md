Learning to use more functions and nested loops in C